# Azure Database Configuration
# This profile is for Azure PostgreSQL deployment
# Activate with: SPRING_PROFILES_ACTIVE=azure

spring:
  datasource:
    # Azure PostgreSQL connection
    # Format: jdbc:postgresql://server.postgres.database.azure.com:5432/database?sslmode=require
    url: ${SPRING_DATASOURCE_URL:jdbc:postgresql://kanban-db.postgres.database.azure.com:5432/kanban_db?sslmode=require}
    # Azure Flexible Server: username only (no @servername suffix)
    # Azure Single Server: username@servername format
    username: ${SPRING_DATASOURCE_USERNAME:Tyh0912}
    password: ${SPRING_DATASOURCE_PASSWORD:Tan09120912}
    driver-class-name: org.postgresql.Driver
    hikari:
      maximum-pool-size: 20
      minimum-idle: 5
      connection-timeout: 30000
      # Azure PostgreSQL SSL configuration
      data-source-properties:
        ssl: true
        sslmode: require

  jpa:
    hibernate:
      ddl-auto: ${SPRING_JPA_HIBERNATE_DDL_AUTO:validate}
    show-sql: ${SPRING_JPA_SHOW_SQL:false}
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect
        format_sql: true
        use_sql_comments: true

# CORS Configuration for Azure deployment
# Update with your Azure frontend URL
cors:
  allowed:
    origins: ${CORS_ALLOWED_ORIGINS:http://localhost:5173,http://localhost:3000}

# WebSocket Configuration for Azure deployment
# Update with your Azure frontend URL
websocket:
  allowed:
    origins: ${WEBSOCKET_ALLOWED_ORIGINS:http://localhost:5173,http://localhost:3000}

